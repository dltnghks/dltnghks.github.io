---
layout: post
title: "우수 마을"
date: 2026-02-05 00:00:00 +0900
categories: [Baekjoon]
tags: [C++]
---


![image](/assets/img/posts/2026-02-05-우수-마을/2fe28fef-de90-8074-be0e-d0719e16dc3e.png)


[1949번: 우수 마을](https://www.acmicpc.net/problem/1949)


## 어떤 걸 사용하나요?

1. '우수 마을'로 선정된 마을 주민 수의 총 합을 **최대**로 해야 한다.
2. 마을 사이의 충돌을 방지하기 위해서, 만일 두 마을이 인접해 있으면 두 마을을 모두 '우수 마을'로 선정할 수는 없다. **즉 '우수 마을'끼리는 서로 인접해 있을 수 없다.**
3. 선정되지 못한 마을에 경각심을 불러일으키기 위해서, **'우수 마을'로 선정되지 못한 마을은 적어도 하나의 '우수 마을'과는 인접**해 있어야 한다.

트리 구조를 가지고 있기 때문에 DP로 채워나가면 될 듯?


## 어떻게 구현하나요?


```c#
상태 - [마을 번호][우수 마을 O/X]
1. 마을 간 연결 그래프를 만든다.
2. DFS로 탐색한다.
	i = 현재 마을, a, b = 자식들
	1. 현재 마을이 우수 마을이라면? dp[i][O] = dp[a][X] + dp[b][X]
	2. 현재 마을이 우수 마을이 아니라면? dp[i][x] = dp[a][O] + dp[b][O]
3. result = max(dp[1][X], dp[1][O])
```


```c#
#include <iostream>
#include <vector>

#define TRUE 1
#define FALSE 0
#define INF 1e9

using namespace std;

vector<int> populations;
vector<vector<int>> graph;
vector<vector<int>> dp;

int solve(int cur, int parent, bool state){

    if(dp[cur][state] != INF) return dp[cur][state];

    dp[cur][state] = (state == TRUE ?  populations[cur] : 0);

    int sum = 0;
    for(int val : graph[cur]){
        if(val == parent) continue;
        
        int trueVal = solve(val, cur, TRUE);
        int falseVal = solve(val, cur, FALSE);

        if(state == TRUE){
            sum += falseVal;
        }else{
            sum += max(trueVal, falseVal);
        }
    }

    dp[cur][state] += sum;

    return dp[cur][state];
}

int main() {
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
   
    int n;
    cin >> n;

    populations = vector<int>(n+1, 0);
    graph = vector<vector<int>>(n+1, vector<int>());
    dp = vector<vector<int>>(n+1, vector<int>(2, INF));
    for(int i = 1; i <= n; i++){
        cin >> populations[i];
    }

    for(int i = 0; i < n-1; i++){
        int a, b;
        cin >> a >> b;
        graph[a].push_back(b);
        graph[b].push_back(a);
    }

    cout << max(solve(1, 0, TRUE), solve(1, 0, FALSE)) << '\n';
    return 0;
}
```

